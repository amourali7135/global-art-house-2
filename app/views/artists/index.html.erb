<section class="clean-block clean-catalog dark">
  <div class="container">
    <div class="block-heading">
      <h2 class="text-dark row align-items-center justify-content-center py-2">Browse the artists of Global Art House!</h2>
    </div>

  <%= simple_form_for :search, url: artists_path, method: "GET" do |f| %>
    <%#= f.input :tag_ids, as: :select2, collection: Tag.art_kinds, input_html: {multiple: true}, label: "What kind of artist do you do want?", required: false %>
    <%#= f.input :country, as: :select2, collection: CountryStateSelect.countries_collection.sort, required: false %>
    <%= f.input :tag_ids, collection: Tag.art_kinds, input_html: {multiple: true, id: "artist_kinds_search"}, label: "What kind of artist do you do want?", required: false %>
    <%= f.input :country, collection: CountryStateSelect.countries_collection.sort, required: false, input_html: {id: "artists_country_search"} %>
    <%= f.input :city, id:"artist_city", required: false %>
    <%= f.input :Sorted_by, :collection => %w[most_comments most_likes most_viewed most_recent], required: false %>
    <%= link_to "Reset", artists_path  %>
    <%= f.submit 'Submit', class: 'btn btn-primary'%>
  <% end %>


    <% if params[:country] %>
      <% if params[:country].class != String %>
        <p>All of the artists of <%= params[:country][:country] %> ! </p>
      <%= flag_icon(params[:country][:country].to_sym.downcase, class:"flag-size") %>
      <% else %>
        <p>All of the artists of <%= params[:country] %> ! </p>
      <%= flag_icon(params[:country].to_sym.downcase, class:"flag-size") %>
      <% end %>
      <% @artists.each do |artist| %>
        <div>
          <%= render partial: 'shared/artist_card', locals: {artist: artist} %>
        </div>
      <% end %>
    <% end %>

    <div class="content py-3">
      <div class="products pl-5 card-grid-3c ">
      <% @artists.each do |artist| %>
        <div>
          <%= render partial: 'shared/artist_card', locals: {artist: artist} %>
        </div>
      <% end %>
      </div>
    </div>
  </div>
  <div class="row align-items-center justify-content-center py-2">
  <%= pagy_nav(@pagy).html_safe %>
  </div>
</section>


